(window.webpackJsonp=window.webpackJsonp||[]).push([[4,15,17],{20:function(t,i,e){"use strict";e.r(i);var s=e(19);i.default=class{constructor(){this._uidNb=0,this._uids={}}createUid(t,i){const e=Object(s.recordName)(t);return!this._uids.hasOwnProperty(e)&&(this._uids[e]=i?i("A"+this._uidNb++):"A"+this._uidNb++)}getUid(t){return this._uids[Object(s.recordName)(t)]}}},21:function(t,i,e){"use strict";e.r(i),i.default=e.e(2).then(e.bind(null,22)).then(t=>t.default).then(t=>(function(i,e,s,h){function n(t){return t.x+t.width/2}function a(t){return t.y+t.height/2}this.svg_=new t(h),this._actors_height=0,this._signals_height=0,this.actors=i,this.signals=e,this.width=0,this.height=0,this.draw=function(){this.layout(),this.svg_.setDocumentSize(this.width,this.height);this.draw_actors(10),this.draw_signals(10+this._actors_height)},this.layout=function(){this.width=0,this.height=0,this.actors.forEach(function(t){const i=this.svg_.getTextSize(t.label);t.text_bb=i,t.x=0,t.y=0,t.width=i.width+40,t.height=i.height+40,t.distances=[],t.padding_right=0,this._actors_height=Math.max(t.height,this._actors_height)},this),e.forEach(function(t){let e,s;const h=this.svg_.getTextSize(t.message);t.text_bb=h,t.width=h.width,t.height=h.height;let n=0;"signal"===t.type?(t.width+=20,t.height+=20,t.actorA===t.actorB?(s=(e=t.actorA.index)+1,t.width+=20):(e=Math.min(t.actorA.index,t.actorB.index),s=Math.max(t.actorA.index,t.actorB.index))):"note"===t.type&&(t.width+=30,t.height+=30,n=20,s=(e=t.actor.index)+1),function(t,e,s){console.assert(t<e,"a must be less than or equal to b"),t<0?(e=i[e]).x=Math.max(s-e.width/2,e.x):e>=i.length?(t=i[t]).padding_right=Math.max(s,t.padding_right):(t=i[t]).distances[e]=Math.max(s,t.distances[e]?t.distances[e]:0)}(e,s,t.width+n),this._signals_height+=t.height},this);let t=0;return this.actors.forEach(function(e){e.x=Math.max(t,e.x),e.distances.forEach(function(t,s){s=i[s],t=Math.max(t,e.width/2,s.width/2),s.x=Math.max(s.x,e.x+e.width/2+t-s.width/2)}),t=e.x+e.width+e.padding_right},this),this.width=20+Math.max(t,this.width),this.height=20+2*this._actors_height+this._signals_height,this},this.draw_actors=function(t){const i=t;this.actors.forEach(function(t){this.draw_actor(t,i,this._actors_height),this.draw_actor(t,i+this._actors_height+this._signals_height,this._actors_height);const e=n(t),s=this.svg_.createPath("M{0},{1} v{2}","solid",e,i+this._actors_height-10,20+this._signals_height);this.svg_.getDocument().appendChild(s)},this)},this.draw_actor=function(t,i,e){t.y=i,t.height=e,this.draw_text_box(t,t.label,10,10)},this.draw_signals=function(t){let i=t;this.signals.forEach(function(t){"signal"===t.type?t.actorA===t.actorB?this.draw_self_signal(t,i):this.draw_signal(t,i):"note"===t.type&&this.draw_note(t,i),i+=t.height},this)},this.draw_self_signal=function(t,i){const e=t.text_bb,s=n(t.actorA),h=s+20+5+e.width/2,a=i+t.height/2;this.draw_text(h,a,t.message,!0);const o=this.svg_.createPath("M{0},{1} C{2},{1} {2},{3} {0},{3}",t.linetype,s,i+5,s+40,i+t.height);o.setAttribute("marker-end","url(#"+t.arrowtype+")"),this.svg_.getDocument().appendChild(o)},this.draw_signal=function(t,i){const e=n(t.actorA),s=n(t.actorB),h=(s-e)/2+e;let a=i+5+10;this.draw_text(h,a,t.message,!0),a=i+t.height-5-5;const o=this.svg_.createPath("M{0},{1} h{2}",t.linetype,e,a,s-e);o.setAttribute("marker-end","url(#"+t.arrowtype+")"),this.svg_.getDocument().appendChild(o)},this.draw_note=function(t,i){const e=n(t.actor);t.x=e+10,t.y=i;const s=this.svg_.createPath("M{0},{1} L{0},{2} L{3},{2} L{0},{1} L{4},{1} L{4},{5} L{3},{5} L{3},{2} Z","solid",t.x-10+t.width-7,t.y+10,t.y+10+7,t.x-10+t.width,t.x+10,t.y-10+t.height);t.hasOwnProperty("bgcolor")&&s.setAttribute("fill",t.bgcolor),this.svg_.getDocument().appendChild(s);const h=n(t),o=a(t);this.draw_text(h,o,t.message,!0,t.hasOwnProperty("fontcolor")&&t.fontcolor)},this.draw_text=function(t,i,e,s,h){const n=this.svg_.createText(e,t,i,h);if(!s){const s=this.svg_.getTextSize(e),h=this.svg_.createRect(s.width,s.height);h.setAttribute("x",t),h.setAttribute("y",i),this.svg_.getDocument().appendChild(h)}this.svg_.getDocument().appendChild(n)},this.draw_text_box=function(t,i,e){let s=t.x+e,h=t.y+e;const o=t.width-2*e,r=t.height-2*e,c=this.svg_.createRect(o,r);c.setAttribute("x",s),c.setAttribute("y",h),this.svg_.getDocument().appendChild(c),s=n(t),h=a(t),this.draw_text(s,h,i,!0)},this.draw()}))},31:function(t,i,e){"use strict";e.r(i);var s=e(19),h=e(20);e(21);function n(t){const i=[],e=Object(s.splitYumlExpr)(t,"[");for(const t of e)if(/^\[.*\]$/.test(t)){const e=Object(s.extractBgAndNote)(t.substr(1,t.length-2),!0);i.push([e.isNote?"note":"object",e.part,e.bg,e.fontcolor])}else{if(!t.includes(">"))throw new Error("Invalid expression");{const e=t.includes(">>")?"async":t.includes(".>")?"dashed":"solid",s=t.startsWith("(")||t.startsWith(")")?t.charAt(0):"",h=t.match(/[\.|>]?>[\(|\)]?$/);if(null===h)throw new Error("Invalid expression");const n=h.index>0?t.substr(0,h.index):"",a=t.endsWith("(")||t.endsWith(")")?t.charAt(t.length-1):"";i.push(["signal",s,n,e,a])}}return i}i.default=function(t,i){const a=[],o=[],r=new h.default;for(const i of t){const t=n(i);for(const i of t){const[t,e]=i;"object"===t&&r.createUid(e,i=>{const h={type:t,name:i,label:Object(s.formatLabel)(e,20,!0),index:a.length};return a.push(h),h})}const e=3===t.length&&"object"===t[0][0]&&"signal"===t[1][0];if(e&&"object"===t[2][0]){const[i,e,s,h]=t[1],n=r.getUid(t[0][1]),a=r.getUid(t[2][1]);switch(h){case"dashed":o.push({type:"signal",actorA:n,actorB:a,linetype:"dashed",arrowtype:"arrow-filled",message:s});break;case"solid":o.push({type:"signal",actorA:n,actorB:a,linetype:"solid",arrowtype:"arrow-filled",message:s});break;case"async":o.push({type:"signal",actorA:n,actorB:a,linetype:"solid",arrowtype:"arrow-open",message:s})}}else if(e&&"note"===t[2][0]){const i=r.getUid(t[0][1]),e={type:"note",message:Object(s.formatLabel)(t[2][1],20,!0),actor:i};t[2][2]&&(e.bgcolor=t[2][2]),t[2][3]&&(e.fontcolor=t[2][3]),o.push(e)}}return Promise.resolve().then(e.bind(null,21)).then(t=>t.default).then(t=>new t(a,o,r._uids,i.isDark)).then(t=>t.svg_.serialize())}}}]);